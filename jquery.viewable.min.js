$.fn.viewable=function(e,t){function i(e,t){var i,n=$(t).width(),o=$(t).height(),a=$(t).scrollTop(),h=$(t).scrollLeft(),r=o+a,f=n+h,w=e.offset().top,c=e.offset().left,l=e.height(),u=e.width(),v=l*u,d=c>h?Math.min(Math.max(f-c,0),u):Math.max(u-(h-c),0),g=Math.round(d/u*1e3)/10,s=w>a?Math.min(Math.max(r-w,0),l):Math.max(l-(a-w),0),M=Math.round(s/l*1e3)/10,b=d*s,m=Math.round(b/v*1e3)/10;return i={viewableArea:b,viewableAreaPercentage:m,viewableWidth:d,viewableWidthPercentage:g,viewableHeight:s,viewableHeightPercentage:M}}if("function"!=typeof e&&e!==!1)throw new Error("Whoops! You need to pass a callback.");t||(t=window),$(this).each(function(n,o){return $e=$(o),e===!1?void $e.off("view"):void function(n){n.on("view",function(n){e(n,i($(this),t))}),$(t).on("scroll",function(){n.trigger("view")}),$(window).on("load",function(){n.trigger("view")})}($e)})};